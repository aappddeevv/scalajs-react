(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{48:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",function(){return s}),n.d(t,"rightToc",function(){return c}),n.d(t,"default",function(){return p});n(0);var a=n(92);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function r(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s={id:"creating",title:"Defining Components"},c=[{value:"Stateless Component Approach #1 (Easiest)",id:"stateless-component-approach-1-easiest",children:[]},{value:"Stateful Components",id:"stateful-components",children:[]},{value:"Attributes",id:"attributes",children:[]},{value:"Child Elements",id:"child-elements",children:[]}],i={rightToc:c},l="wrapper";function p(e){var t=e.components,n=r(e,["components"]);return Object(a.b)(l,o({},i,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Use the hooks pattern to define your components. This approach puts you close to\nthe bare metal JS syntax needed to create hooks. scalajs-reaction provides some\nconvenience conversions and functions to make this easier and typesafe."),Object(a.b)("p",null,"To understand the API you can look at the\n",Object(a.b)("a",o({parentName:"p"},{href:"https://reasonml.github.io/reason-react"}),"ReasonReact")," docs to understand the\napproach to creating Components in scala.js."),Object(a.b)("p",null,"In the next section, we show the stateless component. Look at the\ndemo code for an example of using a reducer component, a component that manages\nstate."),Object(a.b)("p",null,"Some good tutorials on react hooks and how to use them can be found at:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",o({parentName:"li"},{href:"https://overreacted.io/a-complete-guide-to-useeffect"}),"https://overreacted.io/a-complete-guide-to-useeffect")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",o({parentName:"li"},{href:"https://www.robinwieruch.de/react-hooks-fetch-data"}),"https://www.robinwieruch.de/react-hooks-fetch-data")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",o({parentName:"li"},{href:"https://itnext.io/how-to-create-react-custom-hooks-for-data-fetching-with-useeffect-74c5dc47000a"}),"https://itnext.io/how-to-create-react-custom-hooks-for-data-fetching-with-useeffect-74c5dc47000a")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",o({parentName:"li"},{href:"https://www.codebeast.dev/react-memoize-hooks-useRef-useCallback-useMemo"}),"https://www.codebeast.dev/react-memoize-hooks-useRef-useCallback-useMemo")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",o({parentName:"li"},{href:"https://blog.logrocket.com/react-hooks-cheat-sheet-unlock-solutions-to-common-problems-af4caf699e70"}),"https://blog.logrocket.com/react-hooks-cheat-sheet-unlock-solutions-to-common-problems-af4caf699e70")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",o({parentName:"li"},{href:"https://usehooks.com/"}),"https://usehooks.com/"))),Object(a.b)("h2",null,Object(a.b)("a",o({parentName:"h2"},{"aria-hidden":!0,className:"anchor",id:"stateless-component-approach-1-easiest"})),Object(a.b)("a",o({parentName:"h2"},{"aria-hidden":!0,className:"hash-link",href:"#stateless-component-approach-1-easiest"}),"#"),"Stateless Component Approach #1 (Easiest)"),Object(a.b)("p",null,"The easiest approach to creating a component is to use a simple function\ndefinition to define your SFC. There are two type aliases defined, SFC0 (no\nargs) and SFC1 (1 arg), to create components. These components are equivalent to\ndefining your component in javascript using a javascript function."),Object(a.b)("pre",null,Object(a.b)("code",o({parentName:"pre"},{className:"language-scala"}),'object Component1 {\n    // some syntax ceremony so you can call Component1() to create.\n    def apply() = sfc\n    // SFC0 does not take any arguments.\n    val sfc = SFC0 { div("hello world") }\n}\n\n\nobject Component2 {\n   trait Props extends js.Object {\n     var p: js.UndefOr[String] = js.undefined\n   }\n\n   def apply(props:Props) = sfc(props)\n   \n   val sfc = SFC1[Prop]{ props =>\n      div(s"""hello world ${p.getOrElse("no-arg")""")\n   }\n}\n')),Object(a.b)("p",null,"You may want to use ",Object(a.b)("inlineCode",{parentName:"p"},"def apply(props: js.UndefOr[Props] = js.undefined) = ..."),"\nto make it easier to call the function component without arguments."),Object(a.b)("p",null,"To use these function-based components, they must be converted to a\nReactElement. For SFC1, you can use ",Object(a.b)("inlineCode",{parentName:"p"},"yourFunctionComponent(arg)")," to convert the\nSFC to a react element and rely on an implicit conversion. You can also\nautomatically convert a tuple:"),Object(a.b)("pre",null,Object(a.b)("code",o({parentName:"pre"},{className:"language-scala"}),"(component2, new Props {...})\n")),Object(a.b)("p",null,"A nice benefit of using SFCs is that you can export them easily for use in the\njs/ts side of your application assuming the parameter is js friendly."),Object(a.b)("h2",null,Object(a.b)("a",o({parentName:"h2"},{"aria-hidden":!0,className:"anchor",id:"stateful-components"})),Object(a.b)("a",o({parentName:"h2"},{"aria-hidden":!0,className:"hash-link",href:"#stateful-components"}),"#"),"Stateful Components"),Object(a.b)("p",null,"Since the API is based on hooks, just use the hooks ",Object(a.b)("inlineCode",{parentName:"p"},"useState")," or ",Object(a.b)("inlineCode",{parentName:"p"},"useReducer"),"\nhooks."),Object(a.b)("h2",null,Object(a.b)("a",o({parentName:"h2"},{"aria-hidden":!0,className:"anchor",id:"attributes"})),Object(a.b)("a",o({parentName:"h2"},{"aria-hidden":!0,className:"hash-link",href:"#attributes"}),"#"),"Attributes"),Object(a.b)("p",null,'You can define your make function to take either a list of attributes or an\nobject that bundles the attributes together. You can choose how you want to\ndefine the make parameters.  In scala if you define your non-native JS traits\n(you cannot instantiate a trait annotated with @js.native), then you can create\nthem without having to use "override val" syntax:'),Object(a.b)("pre",null,Object(a.b)("code",o({parentName:"pre"},{className:"language-scala"}),"trait MyOpts extends js.Object {\n  var prop1: js.UndefOr[String] = js.undefined\n  var prop2: js.UndefOr[String] = js.undefined\n}\n")),Object(a.b)("p",null,"Then you can do:"),Object(a.b)("pre",null,Object(a.b)("code",o({parentName:"pre"},{className:"language-scala"}),'new MyOpts { \n  prop1 = "foo",\n  prop2 = "bar"\n}\n')),Object(a.b)("p",null,"instead of:"),Object(a.b)("pre",null,Object(a.b)("code",o({parentName:"pre"},{className:"language-scala"}),'new MyOpts {\n  override val prop1 = "foo"\n  override val prop2 = "bar"\n}\n')),Object(a.b)("p",null,"In order to allow your props to contain other attributes, such as those from\ndiv, just have your props inherit from the appropriate attributes trait that is\nprovided:"),Object(a.b)("pre",null,Object(a.b)("code",o({parentName:"pre"},{className:"language-scala"}),"trait MyOpts extends HTMLAttributes[dom.html.Div] {\n   // your extra traits\n}\n")),Object(a.b)("p",null,"You may need to filter your props so you can access only your attributes. See\noffice-ui-fabric-react for an example of a function that can do that\nfiltering. There are many approaches to supporting this."),Object(a.b)("h2",null,Object(a.b)("a",o({parentName:"h2"},{"aria-hidden":!0,className:"anchor",id:"child-elements"})),Object(a.b)("a",o({parentName:"h2"},{"aria-hidden":!0,className:"hash-link",href:"#child-elements"}),"#"),"Child Elements"),Object(a.b)("p",null,"Children in scalajs-react are react nodes. Just include the children in a\nproperty in the props object for an SFC1. That's it. "),Object(a.b)("p",null,"If you wish, you could alter the scala side API slightly to make it more\nfriendly. Here's one way but its not super friendly because the children\nare inside the Props object."),Object(a.b)("pre",null,Object(a.b)("code",o({parentName:"pre"},{className:"language-scala"}),"object Component {\n\n  trait Props extends js.Object {\n    val children: ReactNode\n  }\n  \n  def apply(props: Props) = sfc(props)\n  \n  val sfc = SFC1[Props]{ props =>\n    // ...\n  }\n}\n")),Object(a.b)("p",null,"Here's another way. It has a small amount of boilerplate but produces a more\nergonomic API. The children must still be explicit in the ",Object(a.b)("inlineCode",{parentName:"p"},"Props")," type."),Object(a.b)("pre",null,Object(a.b)("code",o({parentName:"pre"},{className:"language-scala"}),'object Component {\n  trait Props extends js.Object {\n    val arg: Int\n    var children: js.Undefined[ReactNode] = js.undefined\n  }\n\n  // include basic api\n  def apply(props: js.UndefOr[Props] = js.undefiend) = sfc(props)\n \n  // ergonomic API \n  def apply(props: Props)(children: ReactNode*) = \n    sfc(props.combine(js.Dynamic.literal("children" -> children)))\n    // or you could do a new Props {} but literal is easier here.\n  \n  val sfc = SFC1[Props] { props =>\n    // ...\n  }\n  \n}\n')))}p.isMDXComponent=!0},92:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return u});var a=n(0),o=n.n(a),r=o.a.createContext({}),s=function(e){var t=o.a.useContext(r),n=t;return e&&(n="function"==typeof e?e(t):Object.assign({},t,e)),n},c=function(e){var t=s(e.components);return o.a.createElement(r.Provider,{value:t},e.children)},i="mdxType",l={inlineCode:"code",wrapper:function(e){return o.a.createElement(o.a.Fragment,{},e.children)}},p=function(e){var t=e.components,n=e.mdxType,a=e.originalType,r=e.parentName,c=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&-1===t.indexOf(a)&&(n[a]=e[a]);return n}(e,["components","mdxType","originalType","parentName"]),i=s(t);return o.a.createElement(i[r+"."+n]||i[n]||l[n]||a,t?Object.assign({},c,{components:t}):c)};function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,s=new Array(r);s[0]=p;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c[i]="string"==typeof e?e:a,s[1]=c;for(var u=2;u<r;u++)s[u]=n[u];return o.a.createElement.apply(null,s)}return o.a.createElement.apply(null,n)}p.displayName="MDXCreateElement"}}]);