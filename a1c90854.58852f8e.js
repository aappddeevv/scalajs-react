(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{125:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return i})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return l}));var r=n(1),a=n(6),o=(n(0),n(143)),s={id:"importing",title:"Importing from JS to Scala"},i={id:"core/importing",title:"Importing from JS to Scala",description:'Importing a component javascript means you need to create a "Component" in',source:"@site/docs/core/importing.md",permalink:"/scalajs-reaction/docs/core/importing",editUrl:"https://github.com/aappddeevv/scalar2020online/edit/master/presentation/docs/core/importing.md",sidebar:"docs",previous:{title:"Exporting From Scala to JS",permalink:"/scalajs-reaction/docs/core/exporting"},next:{title:"Facades",permalink:"/scalajs-reaction/docs/facades/facades"}},c=[{value:"Managing Javascript Props",id:"managing-javascript-props",children:[]},{value:"Import Typescript SFC",id:"import-typescript-sfc",children:[]},{value:"Typescript",id:"typescript",children:[]}],p={rightToc:c};function l(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,'Importing a component javascript means you need to create a "Component" in\nscala.js through ',Object(o.b)("inlineCode",{parentName:"p"},"@JSImport"),"."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-scala"}),'// import a react component exported as part of a namespace export\n// perhaps mark the import private\n@js.native\n@JSImport("some-lib", JSImport.Namespace)\nobject SomeLibNS {\n  val YourComponent1: ReactJSComponent = js.native\n  val YourComponent2: ReactJSComponent = js.native\n}\n\nobject SomeLib {\n  def YourComponent1(props: Props)(children: ReactNode*) =\n     createElement(SomeLibNS.YourComponent1, props)(children:_*)\n}\n')),Object(o.b)("p",null,"You can think of this as a template, here's a more ergonomic way\nof doing the above:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-scala"}),'object YourComponent1 {\n  @js.native\n  @JSImport("some-lib", "YourComponent1")\n  object JS extends ReactJsComponent\n\n  trait Props extends js.Object {\n    var param1: js.UndefOr[String] = js.undefined\n  }\n\n  def apply(props: Props)(children: ReactNode*) =\n    createElement(JS, props)(children:_*)\n}\n')),Object(o.b)("p",null,"Since this is an imported component, the children do not need to\nbe in the Props trait directly."),Object(o.b)("p",null,"How you hook up attributes and children values to your component is up to\nyou. In typescript, it is\ncommon to define an interface that declares the allowed properties to be passed\nin. The equivalent in scala.js are JS traits. You will want to make them\nnon-native JS traits so you can instantiate them."),Object(o.b)("h2",{id:"managing-javascript-props"},"Managing Javascript Props"),Object(o.b)("p",null,"If you need to include additional HTML specific props, you can use the vdom\npackage. Let's say you want to be able to pass in any HTML element properties to\nyour component."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-scala"}),"import react.vdom._\n\ntrait Props extends HTMLAttributes[dom.html.Element] {\n  // className already declared in HTMLAttributes.\n}\n")),Object(o.b)("h2",{id:"import-typescript-sfc"},"Import Typescript SFC"),Object(o.b)("p",null,"A functional component is just a function. However, react can take a\nfunction definition in its ",Object(o.b)("inlineCode",{parentName:"p"},"React.createElement"),' API. Hence, you can import a\nSFC and just "label" it a ',Object(o.b)("inlineCode",{parentName:"p"},"ReactJSComponent"),". Here's an example:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-typescript"}),'import * as React from "react";\nimport { Address } from "./datamodel";\nimport cx = require("classnames");\n\nexport interface Props {\n  className?: string | null;\n  address?: Address | null;\n}\n\n/** Summarize address. */\nexport const AddressSummary: React.SFC<Address> = (props?: Props) => {\n  props = props || {};\n  const name =\n    (props && props.address && props.address.name) || "<unnamed address>";\n  return (\n    <div className={cx("addressSummary", props.className)}>\n      Typescript sourced: Address Summary: {name}\n    </div>\n  );\n};\n')),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"Address")," is defined in typescript language and represents an interface you need\nto type in:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-typescript"}),"// We have to define this on the scala.js and typescript side.\nexport interface Address {\n  customeraddressid: string | null;\n  name?: string | null;\n  city?: string;\n  stateorprovince?: string | null;\n  postalcode?: string | null;\n}\n")),Object(o.b)("p",null,"The key thing to notice is that the SFC takes a js object with two optional\nparameters. Let's import it into scala.js"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-scala"}),'import scala.scalajs.js\nimport js.annotation.JSImport\nimport react._\nimport js.Dynamic.literal\nimport js.JSConverters._\n\n// use non-native JS trait so you can create an Address in scala.js\ntrait Address extends js.Object {\n  val customeraddressid: js.UndefOr[String|Null]\n  var name: js.UndefOr[String|Null] = js.undefined\n  var city: js.UndefOr[String] = js.undefined\n  ...\n}\n\n\nobject AddressSummary {\n\n  @js.native\n  @JSImport("JSExamples", "AddressSummary")\n  object JS extends ReactJsComponent\n\n  trait Props extends js.Object {\n   var className: js.UndefOr[String | Null]\n   var address: js.UndefOr[Address | Null]\n  }\n\n  def apply(props: Props) =\n    createElement0(AddressSummaryNS.AddressSummary, props)\n}\n')),Object(o.b)("p",null,"The ",Object(o.b)("inlineCode",{parentName:"p"},"0")," indicates that ",Object(o.b)("inlineCode",{parentName:"p"},"createElement")," takes no children and is provided\nas API so you avoid appending a useless ",Object(o.b)("inlineCode",{parentName:"p"},"()"),". There are no children\nto worry about so the children parameter list is dropped."),Object(o.b)("h2",{id:"typescript"},"Typescript"),Object(o.b)("p",null,"If you have typescript definitions you may want to try to convert them to a\nnative JS trait. There are converters you can try:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://scalablytyped.org/docs/readme.html"}),"scalably-typed")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/DefinitelyTyped/DefinitelyTyped"}),"definitely typed")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/sjrd/scala-js-ts-importer"}),"scala-js-ts-importer"))),Object(o.b)("p",null,"You may find that for complicated libraries the conversion is not accurate and\nyou still need hand editing or that the conversion fails."))}l.isMDXComponent=!0},143:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return b}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=a.a.createContext({}),l=function(e){var t=a.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i({},t,{},e)),n},d=function(e){var t=l(e.components);return a.a.createElement(p.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},u=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),d=l(n),u=r,b=d["".concat(s,".").concat(u)]||d[u]||m[u]||o;return n?a.a.createElement(b,i({ref:t},p,{components:n})):a.a.createElement(b,i({ref:t},p))}));function b(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,s=new Array(o);s[0]=u;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var p=2;p<o;p++)s[p]=n[p];return a.a.createElement.apply(null,s)}return a.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);