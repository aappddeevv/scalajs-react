<html><head><title>scalajs-reaction: React Native</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="aappddeevv" /><meta name="description" content="A react integration library for scala.js in the spirit of ReasonReact" /><meta name="og:image" content="/scalajs-reaction/img/poster.png" /><meta name="og:title" content="scalajs-reaction: React Native" /><meta name="og:site_name" content="scalajs-reaction" /><meta name="og:url" content="" /><meta name="og:type" content="website" /><meta name="og:description" content="A react integration library for scala.js in the spirit of ReasonReact" /><link rel="icon" type="image/png" href="/scalajs-reaction/img/favicon.png" /><meta name="twitter:title" content="scalajs-reaction: React Native" /><meta name="twitter:image" content="img/poster.png" /><meta name="twitter:description" content="A react integration library for scala.js in the spirit of ReasonReact" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/scalajs-reaction/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/scalajs-reaction/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/scalajs-reaction/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/scalajs-reaction/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/scalajs-reaction/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/scalajs-reaction/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/scalajs-reaction/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/scalajs-reaction/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/scalajs-reaction/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/scalajs-reaction/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/scalajs-reaction/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/scalajs-reaction/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/scalajs-reaction/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/scalajs-reaction/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/scalajs-reaction/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/scalajs-reaction/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/scalajs-reaction/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/scalajs-reaction/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/scalajs-reaction/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/scalajs-reaction/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/scalajs-reaction/highlight/styles/default.css" /><link rel="stylesheet" href="/scalajs-reaction/css/style.css" /><link rel="stylesheet" href="/scalajs-reaction/css/palette.css" /><link rel="stylesheet" href="/scalajs-reaction/css/codemirror.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/scalajs-reaction/" class="brand"><div class="brand-wrapper"><span>scalajs-reaction</span></div></a></li> <li><a href="/scalajs-reaction/docs/index.html" class="">Getting Started</a></li> <li><a href="/scalajs-reaction/docs/creating.html" class="">Creating scala.js Components</a></li> <li><a href="/scalajs-reaction/docs/importing.html" class="">Importing from JS</a></li> <li><a href="/scalajs-reaction/docs/exporting.html" class="">Exporting to JS</a></li> <li><a href="/scalajs-reaction/docs/styling.html" class="">Styling Suggestions</a></li> <li><a href="/scalajs-reaction/docs/vdom.html" class="">Virtual DOM</a></li> <li><a href="/scalajs-reaction/docs/router.html" class="">Routing</a></li> <li><a href="/scalajs-reaction/docs/redux.html" class="">Redux</a></li> <li><a href="/scalajs-reaction/docs/datainterop.html" class="">Data interop</a></li> <li><a href="/scalajs-reaction/docs/facades.html" class="">Widget Facades</a></li> <li><a href="/scalajs-reaction/docs/mixedproject.html" class="">Mixed Projects</a></li> <li><a href="/scalajs-reaction/docs/reactinterop.html" class="">React Interop</a></li> <li><a href="/scalajs-reaction/docs/data-validation.html" class="">Data Validation</a></li> <li><a href="/scalajs-reaction/docs/forms.html" class="">Forms</a></li> <li><a href="/scalajs-reaction/docs/native.html" class=" active ">React Native</a></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/aappddeevv/scalajs-reaction"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/aappddeevv/scalajs-reaction"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('scalajs-reaction A react integration library for scala.js in the spirit of ReasonReact');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('scalajs-reaction A react integration library for scala.js in the spirit of ReasonReact');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="aappddeevv" data-github-repo="scalajs-reaction"><div class="content-wrapper"><section><h1 id="react-native">React Native</h1>

<p>You can easily create react native applications using this library. react native
uses a “runner” application (unlike flutter) to host the javascript execution
engine. You will need the runner skeleton to build a react native
application. The best way to do that is to follow the instructions for
installing
<a href="https://facebook.github.io/react-native/docs/getting-started"><code class="highlighter-rouge">react-native-cli</code></a>
and then overlaying the scalajs library on top of the generated project.</p>

<h2 id="setup">Setup</h2>

<p>To overlay the scala.js parts (until I create a nice g8 template with this
already in it):</p>

<ul>
  <li>Create build.sbt as you normally would.</li>
  <li>Create the project folder as you normally would.</li>
  <li>Create source folder <code class="highlighter-rouge">mkdir -p src/main/scala</code> content at the top-level.</li>
</ul>

<p>Include the core libraries:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scalajsReactVersion</span> <span class="k">=</span> <span class="o">...</span>
<span class="n">libraryDependencies</span> <span class="o">++=</span> <span class="nc">Seq</span><span class="o">(</span>
    <span class="s">"ttg"</span> <span class="o">%%%</span> <span class="s">"scalajs-reaction-core"</span> <span class="o">%</span> <span class="n">scalajsReactVersion</span><span class="o">,</span>
    <span class="s">"ttg"</span> <span class="o">%%%</span> <span class="s">"scalajs-reaction-native"</span> <span class="o">%</span> <span class="n">scalajsReactVersion</span>
<span class="o">)</span>
</code></pre></div></div>

<p>in your library dependencies. Create your build.sbt build file as you would for
any scala project including scala flags, etc. You can copy portions of the build.sbt file at <a href="https://github.com/aappddeevv/scalajs-react-app.g8">scala.js react template</a>.</p>

<p>Alter the index.js in the top level directory to either contain the “exported to
js” component <em>or</em> you can call <code class="highlighter-rouge">AppRegistry.registerComponent</code> inside of
scalajs. The scala.js function that you would call in index.js must be top level
exported (<code class="highlighter-rouge">@JSExportTopLevel</code>). In either case, the index.js should either use
your exported JS “app” component or call a function that calls
<code class="highlighter-rouge">registerComponent</code>.</p>

<p>You may want to include <code class="highlighter-rouge">"org.scala-js" %%% "scala-js-dom" % "latest.version"</code>
to include scala support for some of the available polyfills such as
<code class="highlighter-rouge">fetch</code>. There is no DOM on the mobile devices, so the DOM parts of this library
are not available and you should not use them.</p>

<p>That’s all you need for setup to get started.</p>

<h2 id="enhanced-setup">Enhanced Setup</h2>

<p>If you want to copy your scalajs output to a well known location so that you
only need to change your index.js (located in the toplevel directory) once, you
can set up a file copy task that copies the output of fullOptJS or
fastOptJS. You would run this task after the scala.js full/fast
processing. index.js is the default starting point for javascript bundling when
using the react-native cli such as <code class="highlighter-rouge">react-native run-android</code>.</p>

<p>The metro bundler looks for index.js to create the javascript resource
graph. Instead of modifying the output of sbt, you can also use build vars in
javascript to switch between targets–a typical approach in javascript
e.g. include min if you are in a dev build. Below is the copy approach. If your
final scala.js project that creates the linked javascript artifact is always the
same, it is probably easier to hardcode the path with conditionals in index.js.</p>

<p>However, let’s just assume that you want to keep index.js unchanged and want to
map full or fast builds to the same output file.</p>

<p>You will want to scope the task to the respective scala.js linkage tasks,
fastOptJS or fullOptJS so that the correct artifactPath is picked up.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">lazy</span> <span class="k">val</span> <span class="n">root</span> <span class="k">=</span> <span class="o">...</span>
  <span class="c1">//...
</span>  <span class="c1">// rename outputs
</span>  <span class="o">.</span><span class="n">settings</span><span class="o">(</span><span class="n">artifactPath</span><span class="o">.</span><span class="n">in</span><span class="o">(</span><span class="nc">Compile</span><span class="o">,</span> <span class="n">fastOptJS</span><span class="o">)</span> <span class="o">:=</span> <span class="n">crossTarget</span><span class="o">.</span><span class="n">in</span><span class="o">(</span><span class="nc">Compile</span><span class="o">,</span> <span class="n">fastOptJS</span><span class="o">).</span><span class="n">value</span> <span class="o">/</span> <span class="s">"Scala.js"</span><span class="o">)</span>
  <span class="o">.</span><span class="n">settings</span><span class="o">(</span><span class="n">artifactPath</span><span class="o">.</span><span class="n">in</span><span class="o">(</span><span class="nc">Compile</span><span class="o">,</span> <span class="n">fullOptJS</span><span class="o">)</span> <span class="o">:=</span> <span class="n">crossTarget</span><span class="o">.</span><span class="n">in</span><span class="o">(</span><span class="nc">Compile</span><span class="o">,</span> <span class="n">fullOptJS</span><span class="o">).</span><span class="n">value</span> <span class="o">/</span> <span class="s">"Scala.js"</span><span class="o">)</span>

<span class="c1">// Copy output to the current dir, which is where build.sbt runs.
// Could use another directory as well e.g. src or dist
</span><span class="k">val</span> <span class="n">copyOutputDir</span> <span class="k">=</span> <span class="s">"."</span>

<span class="k">def</span> <span class="n">copyJSAndMap</span><span class="o">(</span><span class="n">src</span><span class="k">:</span> <span class="kt">File</span><span class="o">)</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
  <span class="n">println</span><span class="o">(</span><span class="n">s</span><span class="s">"Copying: [$src] to [$copyOutputDir]"</span><span class="o">)</span>
  <span class="k">val</span> <span class="n">outputName</span> <span class="k">=</span> <span class="n">src</span><span class="o">.</span><span class="n">name</span>
  <span class="k">val</span> <span class="n">mapOutputName</span> <span class="k">=</span> <span class="n">src</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s">".map"</span>
  <span class="nc">IO</span><span class="o">.</span><span class="n">copyFile</span><span class="o">(</span><span class="n">src</span><span class="o">,</span> <span class="n">file</span><span class="o">(</span><span class="n">outputName</span><span class="o">),</span> <span class="kc">true</span><span class="o">,</span> <span class="kc">true</span><span class="o">)</span>
  <span class="nc">IO</span><span class="o">.</span><span class="n">copyFile</span><span class="o">(</span><span class="n">file</span><span class="o">(</span><span class="n">src</span><span class="o">.</span><span class="n">getCanonicalPath</span><span class="o">()</span> <span class="o">+</span> <span class="s">".map"</span><span class="o">),</span> <span class="n">file</span><span class="o">(</span><span class="n">mapOutputName</span><span class="o">),</span> <span class="kc">true</span><span class="o">,</span> <span class="kc">true</span><span class="o">)</span>
<span class="o">}</span>

<span class="k">lazy</span> <span class="k">val</span> <span class="n">copyJSOutput</span> <span class="k">=</span> <span class="n">taskKey</span><span class="o">[</span><span class="kt">Unit</span><span class="o">](</span><span class="s">"copy scala.js output to well known location"</span><span class="o">)</span>

<span class="c1">// no scoping as we use scalaJSLinkedFile, which is independent of *OptJS,
// instead of artifactPath which is dependent on a specific *OptJS
</span><span class="n">copyJSOutput</span> <span class="o">:=</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">infile</span> <span class="k">=</span> <span class="n">scalaJSLinkedFile</span><span class="o">.</span><span class="n">in</span><span class="o">(</span><span class="nc">Compile</span><span class="o">).</span><span class="n">value</span><span class="o">.</span><span class="n">path</span>
  <span class="n">copyJSAndMap</span><span class="o">(</span><span class="n">file</span><span class="o">(</span><span class="n">infile</span><span class="o">))</span>

<span class="o">}</span>

<span class="c1">// trigger the copy after an *OptJS task is run
// depending on project structure, scope to the project
// run a clean before switching targets
</span><span class="n">fastOptJS</span> <span class="o">/</span> <span class="n">copyJSOutput</span> <span class="o">:=</span> <span class="o">(</span><span class="n">copyJSOutput</span> <span class="n">triggeredBy</span> <span class="n">fastOptJS</span><span class="o">.</span><span class="n">in</span><span class="o">(</span><span class="nc">Compile</span><span class="o">)).</span><span class="n">value</span>
<span class="n">fullOptJS</span> <span class="o">/</span> <span class="n">copyJSOutput</span> <span class="o">:=</span> <span class="o">(</span><span class="n">copyJSOutput</span> <span class="n">triggeredBy</span> <span class="n">fullOptJS</span><span class="o">.</span><span class="n">in</span><span class="o">(</span><span class="nc">Compile</span><span class="o">)).</span><span class="n">value</span>
</code></pre></div></div>

<p>There are many ways to do this in sbt including using artifactPath (scoped to
the fast or full task inside Compile) to copy the file and standardize its output
name for react-native.</p>

<p>Managing task running in sbt is covered in the
<a href="https://www.scala-sbt.org/release/docs/Tasks.html">manual</a> as there are a few
different ways to set the above copy operation up some of which are more simple
then defining a task. A really great blog on sbt tasks is
<a href="https://binx.io/blog/2018/12/08/the-scala-build-tool/">here</a>, you should read
it just to be smarter about sbt.</p>

<h2 id="calling-appregistryregistercomponent-in-scalajs">Calling AppRegistry.registerComponent in scala.js</h2>

<p>If your index.js file imports a function that performs the registration you need
to write the registration function in scala first:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@JSExportTopLevel</span><span class="o">(</span><span class="s">"Main"</span><span class="o">)</span>
<span class="k">object</span> <span class="nc">Main</span> <span class="o">{</span>
  <span class="nd">@JSExport</span><span class="o">(</span><span class="s">"main"</span><span class="o">)</span>
  <span class="k">def</span> <span class="n">maian</span><span class="o">()</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
    <span class="nc">AppRegistry</span><span class="o">.</span><span class="n">registerComponent</span><span class="o">(</span><span class="s">"HelloWorld"</span><span class="o">,</span> <span class="o">()</span> <span class="k">=&gt;</span> <span class="nc">App</span><span class="o">.</span><span class="nc">JS</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<p>Regardless of whether you call <code class="highlighter-rouge">registerComponent</code> in scala or JS, you need to
create the application component. That’s easy. Don’t forget to “wrap” it for JS
use.</p>

<p>In the code below, the component itself is exported so you can call
<code class="highlighter-rouge">registerComponent</code> in index.js. If you call <code class="highlighter-rouge">registerComponent</code> in scala as
show above, you do not need to export the anything related to the component but
it still need to be wrapped.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@JSExportTopLevel</span><span class="o">(</span><span class="s">"App"</span><span class="o">)</span>
<span class="k">object</span> <span class="nc">App</span> <span class="o">{</span>
  <span class="k">val</span> <span class="nc">Name</span> <span class="k">=</span> <span class="s">"App"</span>
  <span class="k">val</span> <span class="n">c</span> <span class="k">=</span> <span class="n">statelessComponent</span><span class="o">(</span><span class="nc">Name</span><span class="o">)</span>
  <span class="k">import</span> <span class="nn">c.ops._</span>
  
  <span class="k">def</span> <span class="n">apply</span><span class="o">()</span> <span class="k">=</span> <span class="n">render</span> <span class="o">{</span> <span class="n">self</span> <span class="k">=&gt;</span>
    <span class="nc">View</span><span class="o">()(</span>
        <span class="nc">Text</span><span class="o">()(</span><span class="s">"This is some text."</span><span class="o">)</span>
    <span class="o">)</span>
  <span class="o">}</span>
  
  <span class="nd">@JSExport</span><span class="o">(</span><span class="s">"JS"</span><span class="o">)</span>
  <span class="k">val</span> <span class="nc">JS</span> <span class="k">=</span> <span class="n">c</span><span class="o">.</span><span class="n">wrapScalaForJs</span><span class="o">[</span><span class="kt">js.Object</span><span class="o">](</span><span class="k">_</span> <span class="k">=&gt;</span> <span class="nc">App</span><span class="o">())</span>
<span class="o">}</span>

</code></pre></div></div>

<p>The top level is usually a stateless component as it is called by the
react-native framework and does not take any arguments.</p>

<p>If you have your exports setup using either approach, your index.js should
include the scala.js output:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// index.js</span>
<span class="c1">// Adjust for your output or use the copy method described above.</span>
<span class="c1">// We assume you used the "copy to a well know location" below.</span>

<span class="c1">// Scala.js runs registerComponent inside Main.</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Main</span> <span class="p">}</span> <span class="k">from</span> <span class="s2">"./Scala.js"</span>

<span class="c1">// JS calls registerComponent inside index.js.</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">App</span> <span class="p">}</span> <span class="k">from</span> <span class="s2">"./Scala.js"</span>

<span class="c1">// Let Main run...</span>
<span class="nx">Main</span><span class="p">.</span><span class="nx">main</span><span class="p">()</span>
<span class="c1">// or let javascript run...</span>
<span class="nx">AppRegistry</span><span class="p">.</span><span class="nx">registerComponent</span><span class="p">(</span><span class="nx">appName</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">App</span><span class="p">.</span><span class="nx">JS</span><span class="p">)</span>
</code></pre></div></div>

<p>If you want to switch on the build type in javascript and skip the sbt
configuration above, use an ES6 feature with dynamic imports (make sure its
enabled in your environment if you need to):</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>if(process.env.NODE_ENV === "production") then { 
const Main = import("./target/scala-2.12/app-opt.js")
}
else {
const Main = import("./target/scala-2.12/app-fastopt.js")
}
</code></pre></div></div>

<p>If you don’t have ES6 support you could use the legacy “require(…)”  which
should be supported for some time to come with most bundlers. The default
react-native metro should allow the dynamic import using <code class="highlighter-rouge">import</code>. If you use
this approach, make sure any imported resources such as images are available
based on a path relative to the js file as your scala or js imports inside of
app-opt.js/app-fastopt.js will now be relative to the target/scala-2.12
directory.</p>

<h2 id="build">Build</h2>

<p>Run sbt as you normally would and during dev and use <code class="highlighter-rouge">~fastOptJS</code> if you used
the triggered approach to perform the scala.js output copy. That allows you to
recompile as needed. react native uses its own JS packager, called metro, that
restructures your JS similar to webpack.</p>

<p>metro is not as feature-rich as webpack. When you run <code class="highlighter-rouge">react-native run-android</code>
it first runs gradle to build the java part of the project and it starts up a JS
server similar to the way that webpack-dev-server works. It is suppose to detect
changes in js files and do a hot reload. You may need to turn on hot reloading
using Ctrl+M (linux/windows hosted emulators).</p>

<h2 id="helpers">Helpers</h2>

<p>While you should install android studio because you will probably need to write
some interop at some point, you can start the emulator without starting android
studio:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># List emulator devices.</span>
<span class="nv">$ </span>emulator <span class="nt">-list-devs</span>

<span class="c"># Start an emulator I defined in android studio.</span>
<span class="nv">$ </span>emulator <span class="nt">-avd</span> Pixel_2_XL_API_28 <span class="nt">-no-boot-anim</span>
</code></pre></div></div>

<p>You will want to add:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">ANDROID_HOME</span><span class="o">=</span><span class="nv">$HOME</span>/Android/Sdk
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$ANDROID_HOME</span>/emulator
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$ANDROID_HOME</span>/tools
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$ANDROID_HOME</span>/tools/bin
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$ANDROID_HOME</span>/platform-tools
</code></pre></div></div>

<p>to a shell script you can import into your current terminal.</p>

<h2 id="other-libraries">Other Libraries</h2>

<p>There are some ports of common libraries, all WIP and some have no code yet :-):</p>

<ul>
  <li>react-navigation (working)</li>
  <li>nativebase (no code yet)</li>
  <li>react-native-elements (no code yet)</li>
</ul>

<p>Creating facades is easy. It only took 3 hours to create the entire facade for
react-native from scratch when I did not even know react-native. I always just
look at the typescript definitions.</p>

<h2 id="resources">Resources</h2>

<p>Widget/other libraries:</p>

<ul>
  <li><a href="https://docs.nativebase.io">nativebase</a></li>
  <li><a href="https://react-native-training.github.io/react-native-elements">react-native-elements</a></li>
  <li><a href="https://github.com/oblador/react-native-vector-icons">icons</a></li>
</ul>

<h2 id="result">Result</h2>

<p>Here’s a simple screen using Text and Button.</p>

<p><img src="./android-screen.png" alt="Android screenshot" width="300px" /></p>

<p>app.scala</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">scala.scalajs.js</span>
<span class="k">import</span> <span class="nn">js.annotation._</span>
<span class="k">import</span> <span class="nn">js.JSConverters._</span>
<span class="k">import</span> <span class="nn">concurrent._</span>
<span class="k">import</span> <span class="nn">concurrent.ExecutionContext.Implicits.global</span>

<span class="k">import</span> <span class="nn">ttg.react</span>
<span class="k">import</span> <span class="nn">react._</span>
<span class="k">import</span> <span class="nn">elements._</span>
<span class="k">import</span> <span class="nn">react.implicits._</span>
<span class="k">import</span> <span class="nn">ttg.react.native</span>
<span class="k">import</span> <span class="nn">native._</span>
<span class="k">import</span> <span class="nn">native.styling._</span>

<span class="k">object</span> <span class="nc">App</span> <span class="o">{</span>

  <span class="k">val</span> <span class="n">instructions</span> <span class="k">=</span> <span class="nc">Platform</span><span class="o">.</span><span class="n">select</span><span class="o">(</span><span class="n">choices</span><span class="o">[</span><span class="kt">String</span><span class="o">](</span>
    <span class="s">"ios"</span> <span class="o">-&gt;</span>
      <span class="s">"Press Cmd+R to reload,\nCmd+D or shake for dev menu"</span><span class="o">,</span>
    <span class="s">"android"</span> <span class="o">-&gt;</span>
      <span class="o">(</span><span class="s">"Double tap R (that's twice!) on your keyboard to reload,\n"</span> <span class="o">+</span>
      <span class="s">"Shake or press menu button for dev menu (or Ctrl-M)"</span><span class="o">),</span>
  <span class="o">))</span>

  <span class="k">def</span> <span class="n">handleClick</span><span class="o">(</span><span class="n">url</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span>
    <span class="k">for</span> <span class="o">{</span>
      <span class="n">supported</span> <span class="k">&lt;-</span> <span class="nc">Linking</span><span class="o">.</span><span class="n">canOpenURL</span><span class="o">(</span><span class="n">url</span><span class="o">).</span><span class="n">toFuture</span>
      <span class="k">_</span> <span class="k">&lt;-</span> <span class="k">if</span> <span class="o">(</span><span class="n">supported</span><span class="o">)</span> <span class="nc">Linking</span><span class="o">.</span><span class="n">openURL</span><span class="o">(</span><span class="n">url</span><span class="o">).</span><span class="n">toFuture</span>
      <span class="k">else</span> <span class="nc">Future</span><span class="o">{</span><span class="n">println</span><span class="o">(</span><span class="s">"Unable to open URI: "</span> <span class="o">+</span> <span class="n">url</span><span class="o">)}</span>
    <span class="o">}</span> <span class="k">yield</span> <span class="o">()</span>

  <span class="k">val</span> <span class="n">url</span> <span class="k">=</span> <span class="s">"https://aappddeevv.github.io/scalajs-react/docs/native.html"</span>

  <span class="k">val</span> <span class="nc">Name</span> <span class="k">=</span> <span class="s">"App"</span>
  <span class="k">val</span> <span class="n">c</span> <span class="k">=</span> <span class="n">statelessComponent</span><span class="o">(</span><span class="nc">Name</span><span class="o">)</span>
  <span class="k">import</span> <span class="nn">c.ops._</span>

  <span class="k">def</span> <span class="n">apply</span><span class="o">()</span> <span class="k">=</span> <span class="n">render</span> <span class="o">{</span> <span class="n">self</span> <span class="k">=&gt;</span>
    <span class="nc">View</span><span class="o">(</span><span class="k">new</span> <span class="nc">View</span><span class="o">.</span><span class="nc">Props</span> <span class="o">{</span>
      <span class="n">style</span> <span class="k">=</span> <span class="n">styles</span><span class="o">.</span><span class="n">container</span>
    <span class="o">})(</span>
      <span class="nc">Text</span><span class="o">(</span><span class="k">new</span> <span class="nc">Text</span><span class="o">.</span><span class="nc">Props</span> <span class="o">{</span>
        <span class="n">style</span> <span class="k">=</span> <span class="n">styles</span><span class="o">.</span><span class="n">welcome</span>
      <span class="o">})(</span><span class="n">s</span><span class="s">"Welcome to React Native with Scala.js! (${Platform.OS})"</span><span class="o">),</span>
      <span class="nc">Text</span><span class="o">(</span><span class="k">new</span> <span class="nc">Text</span><span class="o">.</span><span class="nc">Props</span> <span class="o">{</span>
        <span class="n">style</span> <span class="k">=</span> <span class="n">styles</span><span class="o">.</span><span class="n">instructions</span>
      <span class="o">})(</span><span class="s">"To get started, edit main.scala"</span><span class="o">),</span>
      <span class="nc">Text</span><span class="o">(</span><span class="k">new</span> <span class="nc">Text</span><span class="o">.</span><span class="nc">Props</span> <span class="o">{</span>
        <span class="n">style</span> <span class="k">=</span> <span class="n">styles</span><span class="o">.</span><span class="n">instructions</span>
      <span class="o">})(</span><span class="n">instructions</span><span class="o">),</span>
      <span class="nc">Text</span><span class="o">(</span><span class="k">new</span> <span class="nc">Text</span><span class="o">.</span><span class="nc">Props</span> <span class="o">{</span>
      <span class="o">})(</span>
        <span class="s">"React native info &amp; libs:\nhttps://facebook.github.io/react-native\nhttps://nativebase.io\nhttps://react-native-training.github.io"</span>
      <span class="o">),</span>
      <span class="nc">Button</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">.</span><span class="nc">Props</span> <span class="o">{</span>
        <span class="k">val</span> <span class="n">title</span> <span class="k">=</span> <span class="s">"Learn More on Github"</span>
        <span class="k">val</span> <span class="n">onPress</span> <span class="k">=</span> <span class="k">_</span> <span class="k">=&gt;</span> <span class="n">handleClick</span><span class="o">(</span><span class="n">url</span><span class="o">)</span>
      <span class="o">})()</span>
    <span class="o">)</span>
  <span class="o">}</span>

  <span class="nd">@JSExport</span><span class="o">(</span><span class="s">"JS"</span><span class="o">)</span>
  <span class="k">val</span> <span class="nc">JS</span> <span class="k">=</span> <span class="n">c</span><span class="o">.</span><span class="n">wrapScalaForJs</span><span class="o">[</span><span class="kt">js.Object</span><span class="o">](</span><span class="k">_</span> <span class="k">=&gt;</span> <span class="nc">App</span><span class="o">())</span><span class="c1">//_ =&gt; apply())
</span>
  <span class="k">trait</span> <span class="nc">Styles</span> <span class="k">extends</span> <span class="nc">StyleSet</span> <span class="o">{</span>
    <span class="k">val</span> <span class="n">container</span><span class="k">:</span> <span class="kt">ViewStyle</span>
    <span class="k">val</span> <span class="n">welcome</span><span class="k">:</span> <span class="kt">TextStyle</span>
    <span class="k">val</span> <span class="n">instructions</span><span class="k">:</span> <span class="kt">TextStyle</span> 
  <span class="o">}</span>

  <span class="k">val</span> <span class="n">styles</span> <span class="k">=</span> <span class="nc">StyleSheet</span><span class="o">.</span><span class="n">create</span><span class="o">(</span>
   <span class="k">new</span> <span class="nc">Styles</span> <span class="o">{</span>
     <span class="k">val</span> <span class="n">container</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">ViewStyle</span> <span class="o">{</span>
      <span class="n">flex</span> <span class="k">=</span> <span class="mi">1</span>
      <span class="n">justifyContent</span> <span class="k">=</span> <span class="nc">JustifyContent</span><span class="o">.</span><span class="n">center</span>
      <span class="n">alignItems</span> <span class="k">=</span> <span class="nc">FlexAlignType</span><span class="o">.</span><span class="n">center</span>
      <span class="n">backgroundColor</span> <span class="k">=</span> <span class="s">"#F5FCFF"</span>
    <span class="o">}</span>
    <span class="k">val</span> <span class="n">welcome</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">TextStyle</span> <span class="o">{</span>
      <span class="n">fontSize</span> <span class="k">=</span> <span class="mi">20</span>
      <span class="n">textAlign</span> <span class="k">=</span> <span class="nc">TextAlign</span><span class="o">.</span><span class="n">center</span>
      <span class="n">margin</span> <span class="k">=</span> <span class="mi">10</span>
    <span class="o">}</span>
    <span class="k">val</span> <span class="n">instructions</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">TextStyle</span> <span class="o">{</span>
      <span class="n">textAlign</span> <span class="k">=</span> <span class="nc">TextAlign</span><span class="o">.</span><span class="n">center</span>
      <span class="n">color</span> <span class="k">=</span> <span class="s">"#333333"</span>
      <span class="n">marginBottom</span> <span class="k">=</span> <span class="mi">5</span>
    <span class="o">}}</span>
  <span class="o">)</span>
<span class="o">}</span>
</code></pre></div></div>

<p>main.scala:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">scala.scalajs.js</span>
<span class="k">import</span> <span class="nn">js.annotation._</span>

<span class="k">import</span> <span class="nn">ttg.react.native</span>
<span class="k">import</span> <span class="nn">native._</span>

<span class="nd">@JSExportTopLevel</span><span class="o">(</span><span class="s">"Main"</span><span class="o">)</span>
<span class="k">object</span> <span class="nc">Main</span> <span class="o">{</span>
  <span class="nd">@JSExport</span><span class="o">(</span><span class="s">"main"</span><span class="o">)</span>
  <span class="k">def</span> <span class="n">main</span><span class="o">()</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
    <span class="nc">AppRegistry</span><span class="o">.</span><span class="n">registerComponent</span><span class="o">(</span><span class="s">"HelloWorld"</span><span class="o">,</span> <span class="o">()</span> <span class="k">=&gt;</span> <span class="nc">App</span><span class="o">.</span><span class="nc">JS</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>index.js:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span><span class="nx">AppRegistry</span><span class="p">}</span> <span class="k">from</span> <span class="s1">'react-native'</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">name</span> <span class="k">as</span> <span class="nx">appName</span><span class="p">}</span> <span class="k">from</span> <span class="s1">'./app.json'</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Main</span> <span class="p">}</span> <span class="k">from</span> <span class="s2">"./Scala.js"</span>

<span class="nx">Main</span><span class="p">.</span><span class="nx">main</span><span class="p">()</span>
</code></pre></div></div>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/scalajs-reaction/highlight/highlight.pack.js"></script><script>hljs.configure({languages:['scala','java','bash']});
hljs.initHighlighting();
              </script><script src="/scalajs-reaction/js/main.js"></script></body></html>