<html><head><title>scalajs-react: React Native</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="aappddeevv" /><meta name="description" content="A react integration library for scala.js in the spirit of ReasonReact" /><meta name="og:image" content="/scalajs-react/img/poster.png" /><meta name="og:title" content="scalajs-react: React Native" /><meta name="og:site_name" content="scalajs-react" /><meta name="og:url" content="" /><meta name="og:type" content="website" /><meta name="og:description" content="A react integration library for scala.js in the spirit of ReasonReact" /><link rel="icon" type="image/png" href="/scalajs-react/img/favicon.png" /><meta name="twitter:title" content="scalajs-react: React Native" /><meta name="twitter:image" content="img/poster.png" /><meta name="twitter:description" content="A react integration library for scala.js in the spirit of ReasonReact" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/scalajs-react/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/scalajs-react/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/scalajs-react/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/scalajs-react/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/scalajs-react/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/scalajs-react/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/scalajs-react/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/scalajs-react/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/scalajs-react/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/scalajs-react/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/scalajs-react/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/scalajs-react/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/scalajs-react/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/scalajs-react/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/scalajs-react/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/scalajs-react/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/scalajs-react/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/scalajs-react/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/scalajs-react/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/scalajs-react/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/scalajs-react/highlight/styles/default.css" /><link rel="stylesheet" href="/scalajs-react/css/style.css" /><link rel="stylesheet" href="/scalajs-react/css/palette.css" /><link rel="stylesheet" href="/scalajs-react/css/codemirror.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/scalajs-react/" class="brand"><div class="brand-wrapper"><span>scalajs-react</span></div></a></li> <li><a href="/scalajs-react/docs/index.html" class="">Getting Started</a></li> <li><a href="/scalajs-react/docs/creating.html" class="">Creating scala.js Components</a></li> <li><a href="/scalajs-react/docs/importing.html" class="">Importing from JS</a></li> <li><a href="/scalajs-react/docs/exporting.html" class="">Exporting to JS</a></li> <li><a href="/scalajs-react/docs/styling.html" class="">Styling Suggestions</a></li> <li><a href="/scalajs-react/docs/vdom.html" class="">Virtual DOM</a></li> <li><a href="/scalajs-react/docs/router.html" class="">Routing</a></li> <li><a href="/scalajs-react/docs/redux.html" class="">Redux</a></li> <li><a href="/scalajs-react/docs/datainterop.html" class="">Data interop</a></li> <li><a href="/scalajs-react/docs/facades.html" class="">Widget Facades</a></li> <li><a href="/scalajs-react/docs/mixedproject.html" class="">Mixed Projects</a></li> <li><a href="/scalajs-react/docs/reactinterop.html" class="">React Interop</a></li> <li><a href="/scalajs-react/docs/data-validation.html" class="">Data Validation</a></li> <li><a href="/scalajs-react/docs/forms.html" class="">Forms</a></li> <li><a href="/scalajs-react/docs/native.html" class=" active ">React Native</a></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/aappddeevv/scalajs-react"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/aappddeevv/scalajs-react"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('scalajs-react A react integration library for scala.js in the spirit of ReasonReact');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('scalajs-react A react integration library for scala.js in the spirit of ReasonReact');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="aappddeevv" data-github-repo="scalajs-react"><div class="content-wrapper"><section><h1 id="react-native">React Native</h1>

<p>You can easily create react native applications using this library. react native
uses a “runner” application (unlike flutter) to host the javascript execution
engine. You will need the runner skeleton to build a react native
application. The best way to do that is to follow the instructions for
installing
<a href="https://facebook.github.io/react-native/docs/getting-started"><code class="highlighter-rouge">react-native-cli</code></a>
and then overlaying the scalajs library on top of the generated project.</p>

<h2 id="setup">Setup</h2>

<p>Add your build.sbt, project folder and src/main/scala content to the top-level
of the generated react native project. Include the libraries:</p>

<ul>
  <li>scalajs-react-core</li>
  <li>scalajs-react-native</li>
</ul>

<p>in your library dependencies. Create your build.sbt build file as you would for
any scala project.</p>

<p>Then, you can alter the index.js in the top level directory to either contain
the “exported to js” component <em>or</em> you can call <code class="highlighter-rouge">AppRegistry.registerComponent</code>
inside of scalajs that is top level exported. In either case, the index.js
should either use your exported JS “app” component or call a function that calls
registerComponent.</p>

<p>That’s all you need for setup.</p>

<h2 id="calling-appregistryregistercomponent-in-scalajs">Calling AppRegistry.registerComponent in scala.js</h2>

<p>If your index.js file imports a function that performs the registration:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@JSExportTopLevel</span><span class="o">(</span><span class="s">"Main"</span><span class="o">)</span>
<span class="k">object</span> <span class="nc">Main</span> <span class="o">{</span>
  <span class="nd">@JSExport</span><span class="o">(</span><span class="s">"main"</span><span class="o">)</span>
  <span class="k">def</span> <span class="n">maian</span><span class="o">()</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
    <span class="nc">AppRegistry</span><span class="o">.</span><span class="n">registerComponent</span><span class="o">(</span><span class="s">"HelloWorld"</span><span class="o">,</span> <span class="o">()</span> <span class="k">=&gt;</span> <span class="nc">App</span><span class="o">.</span><span class="nc">JS</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<p>Regardless of whether you call registerComponent in scala or JS, you need to
create the application component. That’s easy. Don’t forget to “wrap” it for JS use. In the code below, it is exported so you can call registerComponent in index.js bt if you call registerComponent in scala as show above, you do need to export it.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@JSExportTopLevel</span><span class="o">(</span><span class="s">"App"</span><span class="o">)</span>
<span class="k">object</span> <span class="nc">App</span> <span class="o">{</span>
  <span class="k">val</span> <span class="nc">Name</span> <span class="k">=</span> <span class="s">"App"</span>
  <span class="k">val</span> <span class="n">c</span> <span class="k">=</span> <span class="n">statelessComponent</span><span class="o">(</span><span class="nc">Name</span><span class="o">)</span>
  <span class="k">import</span> <span class="nn">c.ops._</span>
  
  <span class="k">def</span> <span class="n">apply</span><span class="o">()</span> <span class="k">=</span> <span class="n">render</span> <span class="o">{</span> <span class="n">self</span> <span class="k">=&gt;</span>
    <span class="nc">View</span><span class="o">()(</span>
        <span class="nc">Text</span><span class="o">()(</span><span class="s">"This is some text."</span><span class="o">)</span>
    <span class="o">)</span>
  <span class="o">}</span>
  
  <span class="nd">@JSExport</span><span class="o">(</span><span class="s">"JS"</span><span class="o">)</span>
  <span class="k">val</span> <span class="nc">JS</span> <span class="k">=</span> <span class="n">c</span><span class="o">.</span><span class="n">wrapScalaForJs</span><span class="o">[</span><span class="kt">js.Object</span><span class="o">](</span><span class="k">_</span> <span class="k">=&gt;</span> <span class="nc">App</span><span class="o">())</span>
<span class="o">}</span>

</code></pre></div></div>

<p>Usually, the top level application is a reducer component but the example above
shows a stateless component to keep it simple.</p>

<p>If you have your export setup, your index.js should include the scala.js output like:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// adjust for your output</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Main</span> <span class="p">}</span> <span class="k">from</span> <span class="s2">"./target/scala-2.12/app-fastopt.js"</span>
<span class="c1">// or</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">App</span> <span class="p">}</span> <span class="k">from</span> <span class="s2">"./target/scala-2.12/app-fastopt.js"</span>

<span class="c1">// choose:</span>
<span class="nx">Main</span><span class="p">.</span><span class="nx">main</span><span class="p">()</span>
<span class="c1">// or</span>
<span class="nx">AppRegistry</span><span class="p">.</span><span class="nx">registetrComponent</span><span class="p">(</span><span class="nx">appName</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">App</span><span class="p">.</span><span class="nx">JS</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="build">Build</h2>

<p>Run sbt as you normally would and during dev turn on <code class="highlighter-rouge">~fastOptJS</code>. That allows
you to recompile as needed. react native uses its own JS packager, called metro,
that restructures your JS similar to webpack. metro is not as featurefull as
webpack though. When you run <code class="highlighter-rouge">react-native run-android</code> it first runs gradle to
build the java part of the project and it starts up a JS server similar to the
way that webpack-dev-server works. It is suppose to detect changes in js files
and do a hot reload. You may need to turn on hot reloading using Ctrl+M
(linux/windows hosted emulators).</p>

<p>«insert comment here about detecting the scala.js output changes»</p>

<h2 id="helpers">Helpers</h2>

<p>While you should install android studio because you will probably need to write some interop, you can start the emulator without starting android studio:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># list emulator devices</span>
<span class="nv">$ </span>emulator <span class="nt">-list-devs</span>

<span class="c"># start an emulator</span>
<span class="nv">$ </span>emulator <span class="nt">-avd</span> Pixel_2_XL_API_28 <span class="nt">-no-boot-anim</span>
</code></pre></div></div>

<p>You will want to add:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">ANDROID_HOME</span><span class="o">=</span><span class="nv">$HOME</span>/Android/Sdk
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$ANDROID_HOME</span>/emulator
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$ANDROID_HOME</span>/tools
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$ANDROID_HOME</span>/tools/bin
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$ANDROID_HOME</span>/platform-tools
</code></pre></div></div>

<p>to a shell script you can import into your current terminal.</p>

<h2 id="result">Result</h2>

<p>Here’s a simple screen using Text and Button.</p>

<p><img src="./android-screen.png" alt="Android screenshot" width="300px" /></p>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/scalajs-react/highlight/highlight.pack.js"></script><script>hljs.configure({languages:['scala','java','bash']});
hljs.initHighlighting();
              </script><script src="/scalajs-react/js/main.js"></script></body></html>