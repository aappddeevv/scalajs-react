<html><head><title>scalajs-reaction: React Interop</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="aappddeevv" /><meta name="description" content="A react integration library for scala.js in the spirit of ReasonReact" /><meta name="og:image" content="/scalajs-reaction/img/poster.png" /><meta name="og:title" content="scalajs-reaction: React Interop" /><meta name="og:site_name" content="scalajs-reaction" /><meta name="og:url" content="" /><meta name="og:type" content="website" /><meta name="og:description" content="A react integration library for scala.js in the spirit of ReasonReact" /><link rel="icon" type="image/png" href="/scalajs-reaction/img/favicon.png" /><meta name="twitter:title" content="scalajs-reaction: React Interop" /><meta name="twitter:image" content="img/poster.png" /><meta name="twitter:description" content="A react integration library for scala.js in the spirit of ReasonReact" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/scalajs-reaction/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/scalajs-reaction/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/scalajs-reaction/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/scalajs-reaction/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/scalajs-reaction/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/scalajs-reaction/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/scalajs-reaction/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/scalajs-reaction/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/scalajs-reaction/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/scalajs-reaction/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/scalajs-reaction/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/scalajs-reaction/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/scalajs-reaction/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/scalajs-reaction/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/scalajs-reaction/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/scalajs-reaction/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/scalajs-reaction/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/scalajs-reaction/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/scalajs-reaction/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/scalajs-reaction/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/scalajs-reaction/highlight/styles/default.css" /><link rel="stylesheet" href="/scalajs-reaction/css/style.css" /><link rel="stylesheet" href="/scalajs-reaction/css/palette.css" /><link rel="stylesheet" href="/scalajs-reaction/css/codemirror.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/scalajs-reaction/" class="brand"><div class="brand-wrapper"><span>scalajs-reaction</span></div></a></li> <li><a href="/scalajs-reaction/docs/index.html" class="">Getting Started</a></li> <li><a href="/scalajs-reaction/docs/creating.html" class="">Defining Components</a></li> <li><a href="/scalajs-reaction/docs/importing.html" class="">Importing from JS</a></li> <li><a href="/scalajs-reaction/docs/exporting.html" class="">Exporting to JS</a></li> <li><a href="/scalajs-reaction/docs/styling.html" class="">Styling Suggestions</a></li> <li><a href="/scalajs-reaction/docs/vdom.html" class="">Virtual DOM</a></li> <li><a href="/scalajs-reaction/docs/router.html" class="">Routing</a></li> <li><a href="/scalajs-reaction/docs/bundling.html" class="">Bundling</a></li> <li><a href="/scalajs-reaction/docs/redux.html" class="">Redux</a></li> <li><a href="/scalajs-reaction/docs/datainterop.html" class="">Data interop</a></li> <li><a href="/scalajs-reaction/docs/facades.html" class="">Widget Facades</a></li> <li><a href="/scalajs-reaction/docs/mixedproject.html" class="">Mixed Projects</a></li> <li><a href="/scalajs-reaction/docs/reactinterop.html" class=" active ">React Interop</a></li> <li><a href="/scalajs-reaction/docs/data-validation.html" class="">Data Validation</a></li> <li><a href="/scalajs-reaction/docs/forms.html" class="">Forms</a></li> <li><a href="/scalajs-reaction/docs/native.html" class="">React Native</a></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/aappddeevv/scalajs-reaction"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/aappddeevv/scalajs-reaction"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('scalajs-reaction A react integration library for scala.js in the spirit of ReasonReact');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('scalajs-reaction A react integration library for scala.js in the spirit of ReasonReact');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="aappddeevv" data-github-repo="scalajs-reaction"><div class="content-wrapper"><section><h1 id="react-interop">React Interop</h1>

<p>The interop layer is structured much like ReasonReact so you can read those
documents to understand how scalaj-react is structured. It’s pretty much the
same thing.</p>

<p>A few differences:</p>
<ul>
  <li>Instead of a record structure for scala side component, we use a javascript
object.</li>
  <li>initialState takes a <code class="highlighter-rouge">Self</code> so you have access to callback handlders in case
any object you need to create for your state requires them. You can use the
other methods to get around this or even use mutable state (and change it
directly) in another API callback like didMount but this makes it easier.</li>
  <li>A generator function is provided in the reducer to create the state update
messages. This is a better approach than having to create your own objects for
the state update directive.</li>
  <li>The methods have been changed so that you are <em>only</em> provided a “self”
function parameter that make sense for that method. You cannot, for example,
see a “state” object in “self” if you are using a stateless component.</li>
  <li>You are forced to defined the retained props or initial state in the “new
methods” call if they are required. If you have a stateful comonent, you must
define them. Mandatory fields on “methods” are indicated by a val as show below.</li>
</ul>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span> <span class="k">class</span> <span class="nc">MyState</span><span class="o">(...)</span>
<span class="k">val</span> <span class="n">c</span> <span class="k">=</span> <span class="n">reducerComponent</span><span class="o">[</span><span class="kt">MyState</span><span class="o">](</span><span class="s">"component"</span><span class="o">)</span>
<span class="k">import</span> <span class="nn">c.ops._</span>

<span class="k">def</span> <span class="n">make</span><span class="o">(...)</span> <span class="k">=</span> <span class="n">c</span><span class="o">.</span><span class="n">copy</span><span class="o">(</span><span class="k">new</span> <span class="n">methods</span> <span class="o">{</span>
    <span class="k">val</span> <span class="n">initialState</span> <span class="k">=</span> <span class="nc">MyState</span><span class="o">()</span>
    <span class="k">val</span> <span class="n">render</span> <span class="k">=</span> <span class="n">self</span> <span class="k">=&gt;</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>
<span class="o">})</span>

</code></pre></div></div>

<h2 id="ref-and-key">Ref and Key</h2>

<p>Ref and key are special properties used by react to assist in accessing the
component instance or managing arrays of values. These properties are ripped out
of props and processed special by reactjs.</p>

<p>In this facade, the scala “props” are appended to the real props under a
specially named key. If you were to add key and prop to your scala prop,s they
would not be seen. So…we need a way to create a scala Component with key and
ref.</p>

<p>To add ref and key you can add them using <code class="highlighter-rouge">createElement</code> directly or using the
implicit syntax support, <code class="highlighter-rouge">yourComponent.toEl(Some("key"), Some(yourReactRef))</code>.</p>

<p>The entire ref and key issue can be confusing because in reactjs libraries
imported into scala.js, you can typically define the key and prop in the
imported “props” type definition and reactjs will find them. Since these
elements are created differently than scala components, it just works that way.</p>

<h2 id="plain-javascript">Plain javascript</h2>

<p>You can write your components using raw javascript content. For example, as long as you use js semantics you could do the following:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">val</span> <span class="n">jscomponent</span><span class="k">:</span> <span class="kt">js.Function0</span><span class="o">[</span><span class="kt">ReactNode</span><span class="o">]</span> <span class="k">=</span> <span class="o">()</span> <span class="k">=&gt;</span> <span class="o">{</span>
  <span class="n">div</span><span class="o">(</span><span class="s">"some content"</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div></div>

<p>But you’ll need to create an instance using the raw <code class="highlighter-rouge">ReactJS.createElement</code> function:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="o">...</span><span class="n">some</span> <span class="n">othercomponent</span> <span class="n">render</span> <span class="n">method</span><span class="o">...</span>
   <span class="nc">ReactJS</span><span class="o">.</span><span class="n">createElement</span><span class="o">[</span><span class="kt">Null</span><span class="o">](</span><span class="n">jscomponent</span><span class="o">,</span> <span class="kc">null</span><span class="o">)</span>
   <span class="o">...</span><span class="n">more</span> <span class="n">othercomonent</span> <span class="n">render</span> <span class="n">method</span><span class="o">...</span>
</code></pre></div></div>

<p>This a good alternative to declaring <code class="highlighter-rouge">statelessComponent</code> objects and their
related render method.</p>

<h2 id="latest-reactjs-features">Latest reactjs features</h2>

<h3 id="componentdidcatch">componentDidCatch</h3>

<p>Each defined Component, e.g. each reducerComponent call, establishes a proxy
object that is used when react createClass creates the actual react class. By
default, the proxy defines <code class="highlighter-rouge">componentDidCatch</code> which means that every component
catches errors thrown by descendent components. React Suspense catches promise
thrown so if any Component in the tree has this enabled, then you cannot throw
Promises to support Suspense because scala.js cannot throw any value, it will
get automatically wrapped with a JavascriptException if it is caught on the
javascript side.</p>

<p>Suspense has a very narrow use case at the moment and hopefully they will create
a better effects approach for asynchronous rendering. Until that time, you can
disable “didCatch” for all instances of a specific Component definition by
setting the 2nd parameter to the component creation functions, <code class="highlighter-rouge">disableCatch</code>,
to true. This removes the method from the proxy. You will still be able to
define <code class="highlighter-rouge">didCatch</code> in your component but it will never be called.</p>

<p>So use this:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">val</span> <span class="n">c</span> <span class="k">=</span> <span class="n">reducerComponent</span><span class="o">[</span><span class="kt">S</span>, <span class="kt">A</span><span class="o">](</span><span class="s">"MyComponent"</span><span class="o">,</span> <span class="kc">true</span><span class="o">)</span>
<span class="k">import</span> <span class="nn">c.ops._</span>
<span class="k">def</span> <span class="n">apply</span><span class="o">(...)</span> <span class="k">=</span> <span class="n">c</span><span class="o">.</span><span class="n">copyWith</span><span class="o">(</span><span class="k">new</span> <span class="n">methods</span> <span class="o">{</span> <span class="o">...</span> <span class="o">})</span>
</code></pre></div></div>

<p>to disable it for all instances created from <code class="highlighter-rouge">c</code>.</p>

<h3 id="fragment">Fragment</h3>
<p>scalajs-react supports fragments through <code class="highlighter-rouge">fragmentElement</code>.</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">ttg.react.elements._</span>

<span class="k">val</span> <span class="n">frag</span> <span class="k">=</span> <span class="n">fragmentElement</span><span class="o">()(</span>
    <span class="nc">MyComponent</span><span class="o">.</span><span class="n">make</span><span class="o">(...),</span>
    <span class="nc">MyOtherComponent</span><span class="o">.</span><span class="n">make</span><span class="o">(...)</span>
<span class="o">)</span>
</code></pre></div></div>

<h3 id="context-provider">Context Provider</h3>
<p>The new context provider API is also support as found in react v16.3.</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">ttg.react._</span>

<span class="k">object</span> <span class="nc">Contexts</span> <span class="o">{</span>
  <span class="k">case</span> <span class="k">class</span> <span class="nc">App</span><span class="o">(</span><span class="n">name</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">"noname"</span><span class="o">)</span>
  <span class="k">val</span> <span class="n">appContext</span> <span class="k">=</span> <span class="n">context</span><span class="o">.</span><span class="n">make</span><span class="o">[</span><span class="kt">App</span><span class="o">](</span><span class="nc">App</span><span class="o">())</span>
<span class="o">}</span>

<span class="c1">// provider
</span><span class="k">object</span> <span class="nc">Root</span> <span class="o">{</span>
   <span class="k">import</span> <span class="nn">Contexts._</span>
   <span class="k">import</span> <span class="nn">ttg.react.context._</span> <span class="c1">// import implicits
</span>   
   <span class="k">val</span> <span class="nc">Root</span> <span class="k">=</span> <span class="n">statelessComponent</span><span class="o">(</span><span class="s">"Root"</span><span class="o">)</span>
   
   <span class="k">def</span> <span class="n">make</span><span class="o">(</span><span class="n">namePrefix</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span> <span class="k">=</span>
     <span class="nc">Root</span><span class="o">.</span><span class="n">copy</span><span class="o">(</span><span class="k">new</span> <span class="n">methods</span> <span class="o">{</span>
       <span class="k">val</span> <span class="n">render</span> <span class="k">=</span> <span class="n">self</span> <span class="k">=&gt;</span> <span class="o">{</span>
         <span class="c1">// or use the default using makeProvider(...children...)
</span>         <span class="n">appContext</span><span class="o">.</span><span class="n">makeProvider</span><span class="o">(</span><span class="nc">App</span><span class="o">(</span><span class="n">name</span><span class="k">=</span><span class="n">namePrefix</span> <span class="o">+</span> <span class="n">appContext</span><span class="o">.</span><span class="n">currentValue</span><span class="o">.</span><span class="n">name</span><span class="o">))(</span>
           <span class="nc">MyComponent</span><span class="o">.</span><span class="n">make</span><span class="o">()</span>
         <span class="o">)}</span>
     <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// consumer
</span><span class="k">object</span> <span class="nc">MyComponent</span> <span class="o">{</span>
    <span class="k">import</span> <span class="nn">Contexts.</span>
    <span class="k">import</span> <span class="nn">ttg.react.context._</span> <span class="c1">// import implicit
</span>    
    <span class="k">val</span> <span class="nc">MyComponent</span> <span class="k">=</span> <span class="n">statelessComponent</span><span class="o">(</span><span class="s">"MyComponent"</span><span class="o">)</span>
    
    <span class="k">def</span> <span class="n">make</span><span class="o">()</span> <span class="k">=</span>
      <span class="nc">MyComponent</span><span class="o">.</span><span class="n">copy</span><span class="o">(</span><span class="k">new</span> <span class="n">methods</span> <span class="o">{</span>
        <span class="k">val</span> <span class="n">render</span> <span class="k">=</span>  <span class="n">self</span> <span class="k">=&gt;</span> <span class="o">{</span>
           <span class="n">appContext</span><span class="o">.</span><span class="n">makeConsumer</span><span class="o">{</span> <span class="n">app</span> <span class="k">=&gt;</span>
             <span class="n">app</span><span class="o">.</span><span class="n">name</span>
           <span class="o">}}</span>
      <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>You can provide a scala object, but you can also provide a non-native JS trait
that is automatically merged together for a partial update from the default
value provided when the context was created. This approach is about “props
merging” much like you find in redux. You should take this into account when
updating the value in the provider. It may be much more efficient to use a
non-native JS trait (i.e. a javascript object). The API is in flux until 16.3 is
published.</p>

<h3 id="hooks">Hooks</h3>

<p>Hooks can be found using the <code class="highlighter-rouge">React</code> prefix such as <code class="highlighter-rouge">React.useState</code>. Hooks must
be run inside a “function component.” You can define a function component using
the Stateless Functional Component (SFC) object:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">val</span> <span class="n">sfc</span> <span class="k">=</span> <span class="nc">SFC</span><span class="o">[</span><span class="kt">js.Object</span><span class="o">]{</span> <span class="k">_</span> <span class="k">=&gt;</span>
 <span class="k">val</span> <span class="o">(</span><span class="n">s</span><span class="o">,</span> <span class="n">setState</span><span class="o">)</span> <span class="k">=</span> <span class="nc">React</span><span class="o">.</span><span class="n">useState</span><span class="o">[</span><span class="kt">String</span><span class="o">](</span><span class="s">"initial state"</span><span class="o">)</span>
 <span class="n">div</span><span class="o">(</span>
    <span class="n">div</span><span class="o">(</span><span class="n">s</span><span class="s">"my function component with useState: $s"</span><span class="o">),</span>
    <span class="n">button</span><span class="o">(</span><span class="k">new</span> <span class="nc">ButtonProps</span> <span class="o">{</span>
      <span class="n">onClick</span> <span class="k">=</span> <span class="n">js</span><span class="o">.</span><span class="n">defined</span><span class="o">(</span><span class="k">_</span> <span class="k">=&gt;</span> <span class="n">setState</span><span class="o">(</span><span class="s">"next state"</span><span class="o">))</span>
    <span class="o">})(</span><span class="s">"Click me"</span><span class="o">)</span>
 <span class="o">)</span>
<span class="o">}</span>
</code></pre></div></div>

<p>See the demo examples for code copied from
<a href="http://usehooks.com">usehooks.com</a>. Currently, <code class="highlighter-rouge">useImperativeHandler</code> is not
implemented.</p>

<p>You can write your own hooks by defining the dependent hooks just like in the js
examples. Your authored hooks can be defined in a scala function as long as they
are <em>used</em> in a function component as described above:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="n">myHook</span><span class="o">(</span><span class="n">key</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="o">{</span>
    <span class="k">val</span> <span class="o">(</span><span class="n">keyPressed</span><span class="o">,</span> <span class="n">setKeyPressed</span><span class="o">)</span> <span class="k">=</span> <span class="nc">React</span><span class="o">.</span><span class="n">useState</span><span class="o">[</span><span class="kt">Boolean</span><span class="o">](</span><span class="kc">false</span><span class="o">)</span>
    <span class="o">...</span>
    <span class="n">keyPressed</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="suspense">Suspense</h3>

<p>Suspense allows you to delay rendering until a js.Promise completes. In the
react rendering engine, suspended components continue to display their content
until the effect completion, with a possible fallback in case the effect
fails. This allows you to continue to show user relevant content until the
rendering completes. While you can do some of this today, without using
suspense, the user-experience is bit jerky. You throw the promise in the
rendering function.</p>

<p>There are a couple of complications.</p>
<ul>
  <li>You cannot throw a raw promise in scala.js. It’s always wrapped up before it
hits the js side.</li>
  <li>You cannot call <code class="highlighter-rouge">import</code> as a function as its really a keyword in javascript
now.</li>
</ul>

<p>To use Suspense and React.lazy, you’ll need to do one of a few different
approaches:</p>
<ul>
  <li>Create a .ts/.js file that exports a component that is created using
<code class="highlighter-rouge">React.lazy</code>. The component needs to be non-scalajs component since scalajs
bundles <em>everything</em> together. Import that component as a ReactLazyComponent
and then call <code class="highlighter-rouge">wrapJsForScala</code> to create a scala component.</li>
  <li>Create a .ts/.js file and include only exports of the form <code class="highlighter-rouge">() =&gt;
import("amodule")</code>. The import type is DynamicImportThunk and that can used as
an argument to scala’s <code class="highlighter-rouge">React.lazy</code>. You need to define it as a function so
the ts/js Promise is not started immediately. Since you are created deferred
computations, you can define as many of these as you want in a single file and
import them all at once.</li>
  <li>Externalize the entire Suspense and React.lazy machine and just import a
component from a js/ts module in its entirety.</li>
</ul>

<p>In react 16.8, only lazy loading is supported but any component that throws a
javascript Promise can be used which is how React.lazy and dynamic imports
work. Creating a dynamic import creates as javascript Promise that resolves to
the module content.</p>

<p>Since scala cannot throw a raw javascript Promise, you can create a lazy
component by throwing inside a ts/js defined Component. The demo shows how this
can be done in ts/js. This also means that if you use Suspense, the chain of
parent components must not be a Component object since a <code class="highlighter-rouge">didCatch</code> proxy is
installed and once that handler is used, you cannot rethrow easily into the js
world again. Hence, you any component that implements the <code class="highlighter-rouge">throwit</code> trick below
must check for a Promise object and throw it in the javascript world and so
on. Since this is a bit awkward, it is suggested that your Promise throwing
component be defined using <code class="highlighter-rouge">SFC</code>, which is a pure javscript function component,
not a Component (in this facade), and that it be a direct child of a Suspense
component.</p>

<p>As a trick, you can define an scala import module that imports a single function
that throws an object for you.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="k">default</span> <span class="nx">throwit</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span> <span class="k">throw</span> <span class="nx">e</span> <span class="p">}</span>
</code></pre></div></div>

<p>then import it</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@js</span><span class="o">.</span><span class="n">native</span>
<span class="nd">@JSImport</span><span class="o">(</span><span class="s">"throwit"</span><span class="o">,</span> <span class="nc">JSImport</span><span class="o">.</span><span class="nc">Default</span><span class="o">)</span>
<span class="k">object</span> <span class="nc">throwit</span> <span class="o">{</span> 
   <span class="k">def</span> <span class="n">apply</span><span class="o">(</span><span class="n">t</span><span class="k">:</span> <span class="kt">js.Any</span><span class="o">)</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span> <span class="n">js</span><span class="o">.</span><span class="n">native</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Then throw it in your function, such as a SFC</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">val</span> <span class="n">sfc</span> <span class="k">=</span> <span class="nc">SFC</span><span class="o">[</span><span class="kt">js.Object</span><span class="o">]{</span> <span class="k">_</span> <span class="k">=&gt;</span>
  <span class="k">val</span> <span class="n">x</span> <span class="k">=</span> <span class="n">throwit</span><span class="o">(..</span><span class="n">code</span> <span class="n">that</span> <span class="n">creates</span> <span class="n">a</span> <span class="n">promise</span><span class="o">...)</span>
  <span class="n">div</span><span class="o">(</span><span class="s">"My nodes to display"</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div></div>

<p>But the trick is to have a js.Promise that is smart enough to resolve once the
content has been loaded. This typically uses a backing store of some sort
e.g. cache. If you naviavely try this and its a new promise that never completes
(resolve or fail), you may hang the UI at some point since the promise never
completes.</p>

<p>It’s not clear how useful this all is although the lazy loading use case is
interesting in a mixed project.</p>

<p>Because of the Suspense feature, <code class="highlighter-rouge">didCatch</code> has been removed from scala
Components until the interaction between them is better understood.</p>

<p>We suggest you look at other libraries that may be easier to use such as
<a href="https://www.smooth-code.com/open-source/loadable-components/">loadable
components</a>.</p>

</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/scalajs-reaction/highlight/highlight.pack.js"></script><script>hljs.configure({languages:['scala','java','bash']});
hljs.initHighlighting();
              </script><script src="/scalajs-reaction/js/main.js"></script></body></html>