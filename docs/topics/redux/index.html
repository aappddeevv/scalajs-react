<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.54">


<title data-react-helmet="true">Redux | scalajs-reaction</title>

<meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Redux | scalajs-reaction"><meta data-react-helmet="true" name="description" content="The scalajs-reaction integration is not designed to create or write middleware"><meta data-react-helmet="true" property="og:description" content="The scalajs-reaction integration is not designed to create or write middleware"><meta data-react-helmet="true" property="og:url" content="https://aappddeevv.github.io/scalajs-reaction/docs/topics/redux">

<link data-react-helmet="true" rel="shortcut icon" href="/scalajs-reaction/img/favicon.ico">


<link rel="stylesheet" href="/scalajs-reaction/styles.031cb377.css">


<link rel="preload" href="/scalajs-reaction/styles.5c3bc461.js" as="script">

<link rel="preload" href="/scalajs-reaction/runtime~main.6f9bb183.js" as="script">

<link rel="preload" href="/scalajs-reaction/main.3c816209.js" as="script">

<link rel="preload" href="/scalajs-reaction/1.3a76b485.js" as="script">

<link rel="preload" href="/scalajs-reaction/2.bf216f74.js" as="script">

<link rel="preload" href="/scalajs-reaction/3.d2bbdf3a.js" as="script">

<link rel="preload" href="/scalajs-reaction/1be78505.128db190.js" as="script">

<link rel="preload" href="/scalajs-reaction/12747410.54802530.js" as="script">

<link rel="preload" href="/scalajs-reaction/17896441.bf8545bc.js" as="script">

<link rel="preload" href="/scalajs-reaction/937e742a.67db1dbe.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/scalajs-reaction/"><img class="navbar__logo" src="/scalajs-reaction/img/logo.svg" alt="scalajs-reaction logo"><strong class="navbar__title">scalajs-reaction</strong></a><a class="navbar__item navbar__link" href="/scalajs-reaction/docs/intro/index">Docs</a><a class="navbar__item navbar__link" href="/scalajs-reaction/blog">Blog</a><a target="_blank" rel="noopener noreferrer" href="api/index.html" class="navbar__item navbar__link">API</a><a target="_blank" rel="noopener noreferrer" href="demo" class="navbar__item navbar__link">Demo</a></div><div class="navbar__items navbar__items--right"><a target="_blank" rel="noopener noreferrer" href="https://github.com/aappddeevv/scalajs-reaction" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/scalajs-reaction/"><img class="navbar__logo" src="/scalajs-reaction/img/logo.svg" alt="scalajs-reaction logo"><strong class="navbar__title">scalajs-reaction</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" position="left" href="/scalajs-reaction/docs/intro/index">Docs</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/scalajs-reaction/blog">Blog</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/aappddeevv/scalajs-reaction" class="menu__link" position="right">GitHub</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="api/index.html" class="menu__link" position="left">API</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="demo" class="menu__link" position="left">Demo</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scalajs-reaction/docs/intro/index">What is it?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scalajs-reaction/docs/intro/using">Getting Started</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Core</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scalajs-reaction/docs/core/creating">Defining Components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scalajs-reaction/docs/core/vdom">Virtual DOM</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scalajs-reaction/docs/core/exporting">Exporting From Scala to JS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scalajs-reaction/docs/core/importing">Importing from JS to Scala</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Facades</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scalajs-reaction/docs/facades/facades">Facades</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scalajs-reaction/docs/facades/react_native">React Native</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Useful Topics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/scalajs-reaction/docs/topics/styling">Styling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/scalajs-reaction/docs/topics/forms">Forms</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/scalajs-reaction/docs/topics/routing">Routing</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" tabindex="0" href="/scalajs-reaction/docs/topics/redux">Redux</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/scalajs-reaction/docs/topics/data_validation">Data Validation</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Miscellaneous</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scalajs-reaction/docs/misc/bundling">Bundling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scalajs-reaction/docs/misc/data_interop">Data Interop</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Redux</h1></header><div class="markdown"><p>The scalajs-reaction integration is not designed to create or write middleware
in scalajs-reaction. There are some other scala.js libraries that can provide
full access to the redux API. Two projects in particular are:</p><ul><li><a href="https://github.com/eldis/scalajs-redux">https://github.com/eldis/scalajs-redux</a></li><li><a href="https://github.com/shogowada/scalajs-reactjs">https://github.com/shogowada/scalajs-reactjs</a></li></ul><p>Both of these contain redux and full scala.js react integration layers. For
example, you can define a redux store in scala using those libraries.</p><p>Since this facade is based on hooks, you can use the relatively simply hooks
facade to use redux inside your scala.js defined components.</p><p>At its core, <code>react-redux</code>, the react integration layer with redux, creates
an intermediate component that:</p><ol><li>Obtains the store from the context (or props if
they are passed down with the name &quot;store&quot; or it finds the storeKey).</li><li>Calls mapStateToProps (with the redux state and your component&#x27;s props)  calls
mapDispatchToProps (dispatch func and your component&#x27;s props) .</li><li>Sets the the state of the wrapper component (called Connect) that
<code>react-redux</code> creates. It uses a dummy state. The setState call in Connect
forces it and its children to render.</li></ol><p>The magic is that react-redux tries to memoize the results so that it reduces
the number of renders in your component if the state changes but those changes
do not change the merged set of props.</p><p>Memoizing a function means that a function remembers (stores) its previous input
and on the next function call if the input has not changed, it returns the same
result. Of course, this means the function stores state and potentially holds
onto large amounts of &quot;input&quot; data as well as previousu results--all of which
inflates memory usage.</p><p><code>react-redux</code> also uses a Subscription object to subscribe to events hold a link
to their parent subscription and managed the unsubscribe process in the correct
order (child to parent).</p><p>On the scala side, we just need to define our component and use the react-redux
hooks API provided.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="scala-side-example"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#scala-side-example" title="Direct link to heading">#</a>Scala Side Example</h2><p>To preserve integration on the scala side, you have to do the same type of
mapping from redux state to props.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">import react_redux</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">import react._</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// mimic the definition in js</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">@js.native</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">trait GlobalAppState extends js.Object {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   val label: js.UndefOr[String] = js.undefined</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">object MyComponent {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    trait Props extends js.Object { </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       // ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    def apply(props: Props) = sfc(props)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    val sfc = SFC1[Props] { props =&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      val label = </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          ReactRedux.useSelector[GlobalAppState, js.UndefOr[String]](_.label)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      // other react-redux calls such is ReactRedux.useDispatch[GlobalAction]()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      div(label)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>That&#x27;s all you need to do. Just like with importing, if you choose your props
carefully, you can reduce your API data swizzling work significantly if your
props are js friendly, but its up to you.</p><p>Also, note that the <code>apply</code> function in the example above takes no children. If
it had, we would have added a second parameter list (or to the first parameter
list) or added children explicitly to the <code>Props</code> trait. It&#x27;s up to you on how
you want to structure your internal API.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/aappddeevv/scalar2020online/edit/master/presentation/docs/topics/redux.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/scalajs-reaction/docs/topics/routing"><div class="pagination-nav__link--sublabel">Previous</div><div class="pagination-nav__link--label">« Routing</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/scalajs-reaction/docs/topics/data_validation"><div class="pagination-nav__link--sublabel">Next</div><div class="pagination-nav__link--label">Data Validation »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#scala-side-example" class="contents__link">Scala Side Example</a></li></ul></div></div></div></div></main></div></div>
</div>

<script src="/scalajs-reaction/styles.5c3bc461.js"></script>

<script src="/scalajs-reaction/runtime~main.6f9bb183.js"></script>

<script src="/scalajs-reaction/main.3c816209.js"></script>

<script src="/scalajs-reaction/1.3a76b485.js"></script>

<script src="/scalajs-reaction/2.bf216f74.js"></script>

<script src="/scalajs-reaction/3.d2bbdf3a.js"></script>

<script src="/scalajs-reaction/1be78505.128db190.js"></script>

<script src="/scalajs-reaction/12747410.54802530.js"></script>

<script src="/scalajs-reaction/17896441.bf8545bc.js"></script>

<script src="/scalajs-reaction/937e742a.67db1dbe.js"></script>


</body>
</html>